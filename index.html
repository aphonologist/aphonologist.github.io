  var aaripa = {
  "#":  "#",
  "AA": "&#97;",
  "AE": "&#230;",
  "AH": "&#652;",
  "AO": "&#596;",  
  "AW": "&#97;&#650;",  
  "AY": "&#97;&#618;", 
  "B":  "&#98;",
  "CH": "&#116;&#865;&#643;",
  "D":  "&#100;",
  "DH": "&#240;",
  "EH": "&#603;",
  "ER": "&#734;",
  "EY": "&#101;&#618;",
  "F":  "&#102;",
  "G":  "&#609;",
  "HH": "&#104;",
  "IH": "&#618;",
  "IY": "&#105;",
  "JH": "&#100;&#865;&#658;",
  "K":  "&#107;",
  "L":  "&#108;",
  "M":  "&#109;",
  "N":  "&#110;",
  "NG": "&#331;",
  "OW": "&#111;&#650;",
  "OY": "&#596;&#618;",
  "P":  "&#112;",
  "R":  "&#633;",
  "S":  "&#115;",
  "SH": "&#643;",
  "T":  "&#116;",
  "TH": "&#952;",
  "UH": "&#650;",
  "UW": "&#117;",
  "V":  "&#118;",
  "W":  "&#119;",
  "Y":  "&#106;",
  "Z":  "&#122;",
  "ZH": "&#658;"
};
  
var type;
var phonA = '#';
var phonB = '#';
  
function myFunction() {
  var oldString = document.getElementById("demo").innerHTML;
  var userInput = document.getElementById("phonostring").value;
  oldString = oldString + " " + userInput;
  document.getElementById("demo").innerHTML = oldString;
  
  var oldipa = document.getElementById("ipa").innerHTML;
  var useripa = aaripa[userInput];
  document.getElementById("ipa").innerHTML = oldipa + " " + useripa;
  
  if (type == 'unigram') {
    for(var key in unidict) {
      var value = unidict[key];
      var update = key + "range";
      document.getElementById(update).innerHTML = value;
    }
  }

  if (type == 'bigram') {
    for(var unikey in unidict) {
      key = userInput + "  " + unikey + " ";
      var value = bidict[key];
      var update = unikey + "range";
      document.getElementById(update).innerHTML = value;
    }
  }
  if (type == 'trigram') {
    for(var unikey in unidict) {
      key = phonA + "  " phonB + " " + unikey;
      var value = tridict[key];
      var update = unikey + "range";
      document.getElementById(update).innerHTML = value;
    }    
  }
  phonA = phonB;
  phonB = userInput;
  if (userInput == "#") {
      document.getElementById("enter").disabled = true;
  }
  document.getElementById('phonostring').value = ''
}

function myFunction2() {
  document.getElementById("demo").innerHTML = "#";
  document.getElementById("ipa").innerHTML = "#";  
  document.getElementById("enter").disabled = false;
}
  
function unigrams() {
  document.getElementById("demo").innerHTML = "#";
  type = 'unigram';
  
  for(var key in unidict) {
    var value = unidict[key];
    var update = key + "range";
    document.getElementById(update).innerHTML = value;
  }
  document.getElementById("enter").disabled = false;
}

function bigrams() {
  document.getElementById("demo").innerHTML = "#";
  type = 'bigram';
  document.getElementById("enter").disabled = false;
  
  for(var unikey in unidict) {
    key = "#  " + unikey + " ";
    var value = bidict[key];
    var update = unikey + "range";
    document.getElementById(update).innerHTML = value;
  }
}
  
function trigrams() {
  var phonA = "#";
  var phonB = "#";
  document.getElementById("demo").innerHTML = "#";
  type = 'trigram';
  document.getElementById("enter").disabled = false;
  
  for(var unikey in unidict) {
    key = "# # " + unikey;
    var value = tridict[key];
    var update = unikey + "range";
    document.getElementById(update).innerHTML = value;
  }
}
</script>
</head>
<body>

<h2>English phonotactics with D and D dice</h2>
  
  <input type="text" id="phonostring"> </input>

<p id="demo">#</p>

<p id="ipa">#</p>
  
<p> Roll 2 D10s, a D20, a D12, a D8, a D6, and a D4 twice, and add their totals to select the next phoneme, or pick a number randomly between 0 and 140.</p>

  
<button type="button" onclick="myFunction()" id="enter">Enter phoneme</button>
  
<button type="button" onclick="myFunction2()">Reset</button>
  
<button type="button" onclick="unigrams()">Use unigrams</button>

<button type="button" onclick="bigrams()">Use bigrams</button>
  
<button type="button" onclick="trigrams()">Use trigrams</button>

<table>
  <tr>
    <td>#</td>
    <td id="#range"></td>
    <td>K</td>
    <td id="Krange"></td>
  </tr>
  <tr>
    <td>AA</td>
    <td id="AArange"></td>
    <td>L</td>
    <td id="Lrange"></td>
  </tr>
  <tr>
    <td>AE</td>
    <td id="AErange"></td>
    <td>M</td>
    <td id="Mrange"></td>
  </tr>
  <tr>
    <td>AH</td>
    <td id="AHrange"></td>
    <td>N</td>
    <td id="Nrange"></td>
  </tr>
  <tr>
    <td>AO</td>
    <td id="AOrange"></td>
    <td>NG</td>
    <td id="NGrange"></td>
  </tr>
  <tr>
    <td>AW</td>
    <td id="AWrange"></td>
    <td>OW</td>
    <td id="OWrange"></td>
  </tr>
  <tr>
    <td>AY</td>
    <td id="AYrange"></td>
    <td>OY</td>
    <td id="OYrange"></td>
  </tr>
  <tr>
    <td>B</td>
    <td id="Brange"></td>
    <td>P</td>
    <td id="Prange"></td>
  </tr>  
  <tr>
    <td>CH</td>
    <td id="CHrange"></td>
    <td>R</td>
    <td id="Rrange"></td>
  </tr>
  <tr>
    <td>D</td>
    <td id="Drange"></td>
    <td>S</td>
    <td id="Srange"></td>
  </tr>
  <tr>
    <td>DH</td>
    <td id="DHrange"></td>
    <td>SH</td>
    <td id="SHrange"></td>
  </tr>
  <tr>
    <td>EH</td>
    <td id="EHrange"></td>
    <td>T</td>
    <td id="Trange"></td>
  </tr>
  <tr>
    <td>ER</td>
    <td id="ERrange"></td>
    <td>TH</td>
    <td id="THrange"></td>
  </tr>
  <tr>
    <td>EY</td>
    <td id="EYrange"></td>
    <td>UH</td>
    <td id="UHrange"></td>
  </tr>
  <tr>
    <td>F</td>
    <td id="Frange"></td>
    <td>UW</td>
    <td id="UWrange"></td>
  </tr>  
  <tr>
    <td>G</td>
    <td id="Grange"></td>
    <td>V</td>
    <td id="Vrange"></td>
  </tr>
  <tr>
    <td>HH</td>
    <td id="HHrange"></td>
    <td>W</td>
    <td id="Wrange"></td>
  </tr>
  <tr>
    <td>IH</td>
    <td id="IHrange"></td>
    <td>Y</td>
    <td id="Yrange"></td>
  </tr>  
  <tr>
    <td>IY</td>
    <td id="IYrange"></td>
    <td>Z</td>
    <td id="Zrange"></td>
  </tr>
  <tr>
    <td>JH</td>
    <td id="JHrange"></td>
    <td>ZH</td>
    <td id="ZHrange"></td>
  </tr>
</table>

</body>
</html> 
